{"bounties":[{"title":"Fix unsound unsafe impl Send/Sync for InMemoryDB","description":"InMemoryDB has unsafe impl Send + Sync marked with TODO comments indicating it's temporary and may cause data races. The Slice type used internally is not thread-safe. Remove or properly implement these traits.","pathHint":"crates/store/src/db/memory.rs","estimatedMinutes":45,"category":"concurrency","severity":"critical"},{"title":"Fix unsafe Bytes::from_static with non-static lifetime","description":"MessageCodec::encode creates Bytes::from_static from a slice that is not actually 'static, relying on the assumption that LengthDelimitedCodec copies data. This is UB if the assumption is violated.","pathHint":"crates/network/primitives/src/stream/codec.rs","estimatedMinutes":30,"category":"design-flaw","severity":"critical"},{"title":"Fix unsafe pointer aliasing in Collection::children_cache","description":"children_cache() returns &mut reference from RefCell using unsafe pointer conversion while the RefMut guard is dropped. This violates Rust's aliasing rules and can cause undefined behavior.","pathHint":"crates/storage/src/collections.rs","estimatedMinutes":45,"category":"design-flaw","severity":"critical"},{"title":"Replace blocking mutex in async-capable provider registries","description":"Global registries (PROVIDER_REGISTRY, AUTH_DATA_REGISTRY, STORAGE_REGISTRY) use std::sync::Mutex with .lock().unwrap() which can block the async runtime. Use tokio::sync::Mutex or parking_lot.","pathHint":"crates/auth/src/providers/core/provider_registry.rs","estimatedMinutes":30,"category":"concurrency","severity":"high"},{"title":"Fix potential memory leak in SecretManager::start_rotation_task","description":"start_rotation_task spawns an infinite loop holding Arc<Self>. The task is never cancelled and the Arc is never dropped, preventing cleanup. Add a cancellation mechanism via CancellationToken.","pathHint":"crates/auth/src/secrets.rs","estimatedMinutes":30,"category":"design-flaw","severity":"high"},{"title":"Handle root hash mismatch as error instead of warning","description":"In DeltaStore apply, computed hash mismatch with expected hash is only logged as warning and execution continues by forcing the expected hash. This can hide state corruption and should return an error or at least be configurable.","pathHint":"crates/node/src/delta_store.rs","estimatedMinutes":30,"category":"design-flaw","severity":"high"},{"title":"Fix race condition in DeltaStore head_root_hashes updates","description":"DeltaStore performs separate read and write operations on head_root_hashes without holding lock between operations. Another task could modify state between the operations causing inconsistency.","pathHint":"crates/node/src/delta_store.rs","estimatedMinutes":45,"category":"concurrency","severity":"high"},{"title":"Validate unsafe Repr<T> pointer casts have #[repr(transparent)]","description":"Multiple unsafe casts assume Repr<T> is layout-compatible with T (ptr cast from [ContextIdentity] to [Repr<ContextIdentity>]). Verify Repr has #[repr(transparent)] or add it.","pathHint":"crates/context/config/src/client/env/config/requests.rs","estimatedMinutes":30,"category":"design-flaw","severity":"high"},{"title":"Replace panic! with compile_error in derive macros","description":"AtomicUnit, Collection, and Mergeable derive macros use panic!() for error conditions. Proc-macros should return proper compile errors using syn::Error or compile_error!.","pathHint":"crates/storage-macros/src/lib.rs","estimatedMinutes":30,"category":"bug","severity":"high"},{"title":"Fix potential infinite loop in substitute_aliases_in_payload","description":"The alias substitution loop uses memmem::find on remaining slice but doesn't handle the case where replacement contains the needle, potentially causing infinite loops with carefully crafted inputs.","pathHint":"crates/context/src/handlers/execute.rs","estimatedMinutes":30,"category":"bug","severity":"high"},{"title":"Fix From<InstantiationError> impl that can panic","description":"The From impl for VMError panics on CpuFeature, DifferentStores, and DifferentArchOS variants instead of returning proper errors. Should return VMError variants instead.","pathHint":"crates/runtime/src/errors.rs","estimatedMinutes":30,"category":"design-flaw","severity":"high"},{"title":"Replace unreachable_unchecked with unreachable! for safety","description":"Multiple uses of unreachable_unchecked() in store/src/iter.rs and sdk/macros/src/errors.rs can cause undefined behavior if conditions change. Use unreachable!() or proper error handling.","pathHint":"crates/store/src/iter.rs","estimatedMinutes":30,"category":"security","severity":"high"},{"title":"Fix spin lock that panics on budget exhaustion","description":"Lazy lock acquisition in actix utils has a spin loop that panics if SPIN_BUDGET is exhausted. Should return an error or use proper async waiting instead of spinning and panicking.","pathHint":"crates/utils/actix/src/lazy.rs","estimatedMinutes":30,"category":"concurrency","severity":"high"},{"title":"Strengthen default CSP configuration","description":"Default CSP config includes 'unsafe-inline' and 'unsafe-eval' for script_src and style_src. These weaken XSS protection. Consider using nonces or hashes instead for production.","pathHint":"crates/auth/src/config.rs","estimatedMinutes":30,"category":"security","severity":"high"},{"title":"Handle SystemTime before UNIX_EPOCH in VersionedSecret","description":"VersionedSecret::new and is_expired use .unwrap() on duration_since(UNIX_EPOCH) which will panic if system clock is wrong. Add proper error handling.","pathHint":"crates/auth/src/secrets.rs","estimatedMinutes":20,"category":"bug","severity":"medium"},{"title":"Add bounds checking before slice operations in blobs","description":"blob_write and blob_read read guest memory without validating the data length against max_blob_chunk_size before operations. Add explicit validation.","pathHint":"crates/runtime/src/logic/host_functions/blobs.rs","estimatedMinutes":30,"category":"bug","severity":"medium"},{"title":"Handle dropped tasks in node event handlers","description":"Multiple places use drop(ctx.spawn(...)) or drop(tokio::spawn(...)) ignoring the JoinHandle. Task failures are silently ignored. Store handles and monitor task completion.","pathHint":"crates/node/src/handlers/network_event.rs","estimatedMinutes":30,"category":"design-flaw","severity":"medium"},{"title":"Fix cache staleness for dag_heads in ContextManager","description":"get_or_fetch_context has a 'CRITICAL FIX' comment about dag_heads being stale. The fix reloads from DB on every cache hit which is inefficient. Implement proper cache invalidation.","pathHint":"crates/context/src/lib.rs","estimatedMinutes":45,"category":"design-flaw","severity":"medium"},{"title":"Add validation for xcall target context permissions","description":"Cross-context calls find 'any owned member' to execute as without checking if that member has appropriate permissions for the target function being called.","pathHint":"crates/context/src/handlers/execute.rs","estimatedMinutes":45,"category":"security","severity":"medium"},{"title":"Handle transmute correctly in InMemoryDB iterator","description":"InMemoryDBIter::new uses transmute between InMemoryIterInner types with different generic params. Verify types have compatible layouts or use safe alternatives.","pathHint":"crates/store/src/db/memory.rs","estimatedMinutes":30,"category":"design-flaw","severity":"medium"},{"title":"Validate delta action signatures before applying","description":"sign_user_actions checks signature is all zeros to determine if signing needed, but doesn't validate existing non-zero signatures before trusting them.","pathHint":"crates/context/src/handlers/execute.rs","estimatedMinutes":30,"category":"security","severity":"medium"},{"title":"Fix unimplemented!() in Interface::compare_merkle_hashes","description":"The compare_merkle_hashes implementation has an unimplemented!() that can be reached in production if called with certain parameters. Implement the method or return proper error.","pathHint":"crates/storage/src/interface.rs","estimatedMinutes":30,"category":"bug","severity":"medium"},{"title":"Add timeout for blocking_lock in arbiter_pool","description":"ArbiterPool::get() uses .lock().await on tokio::sync::Mutex without timeout. If arbiter fails to yield, this can hang indefinitely. Add timeout.","pathHint":"crates/node/src/arbiter_pool.rs","estimatedMinutes":25,"category":"concurrency","severity":"medium"},{"title":"Fix potential double-free in EntryMut Drop","description":"EntryMut::Drop calls save() but doesn't check if entry was already removed via remove(). If Drop runs after remove(), may attempt to save invalid data.","pathHint":"crates/storage/src/collections.rs","estimatedMinutes":30,"category":"bug","severity":"medium"},{"title":"Replace expect in VMLogic::host_functions with proper error","description":"host_functions() panics with expect('VM Memory not initialized') if with_memory wasn't called. Return Result or use builder pattern to enforce initialization order.","pathHint":"crates/runtime/src/logic.rs","estimatedMinutes":25,"category":"bug-risk","severity":"medium"},{"title":"Remove dbg! macros from SDK types","description":"SDK types.rs has 6 dbg! calls in From implementations that will print debug output in production builds. Remove or replace with proper logging.","pathHint":"crates/sdk/src/types.rs","estimatedMinutes":15,"category":"code-quality","severity":"medium"},{"title":"Remove dbg! macros from runtime examples","description":"Runtime examples rps.rs has 20+ dbg! calls. While examples, these pollute output. Use println! or proper logging instead.","pathHint":"crates/runtime/examples/rps.rs","estimatedMinutes":15,"category":"code-quality","severity":"low"},{"title":"Implement TODO for context ID and Identity approach","description":"client_keys.rs has TODO about deciding final approach for context ID and Identity handling. Design decision needed.","pathHint":"crates/auth/src/api/handlers/client_keys.rs","estimatedMinutes":30,"category":"improvement","severity":"medium"},{"title":"Implement proper iterator for store handle","description":"Multiple TODOs indicate iterator should implement std::iter::Iterator trait instead of custom DBIter for better ergonomics and ecosystem compatibility.","pathHint":"crates/store/src/handle.rs","estimatedMinutes":45,"category":"improvement","severity":"medium"},{"title":"Replace unwrap with proper error handling in VMLimits::default","description":"VMLimits::default uses is_valid helper that panics on invalid values. Default values should be compile-time constants or return Result.","pathHint":"crates/runtime/src/logic.rs","estimatedMinutes":20,"category":"bug-risk","severity":"medium"},{"title":"Fix TODO for empty blob assertion","description":"blob_write has TODO to add assertion that no bytes were written during creation of an empty blob. Add the assertion to prevent invalid state.","pathHint":"crates/runtime/src/logic/host_functions/blobs.rs","estimatedMinutes":20,"category":"improvement","severity":"low"},{"title":"Implement Clone for storage Root type","description":"Tests have comment 'Clone for node 2 (TODO: implement Clone for Root)'. Implement Clone to enable proper test isolation and usage.","pathHint":"crates/storage/src/tests/nested_crdt_merge.rs","estimatedMinutes":30,"category":"improvement","severity":"low"},{"title":"Remove dead_code allow on DagStore snapshot","description":"File has #[allow(dead_code)] on functionality that should be used. Either remove dead code or implement missing callers.","pathHint":"crates/node/src/sync/snapshot.rs","estimatedMinutes":20,"category":"code-quality","severity":"low"},{"title":"Implement TODO for refactoring alias key function","description":"alias.rs has TODO to refactor the function and add unit tests for the whole module. Function is complex and needs better testing.","pathHint":"crates/store/src/key/alias.rs","estimatedMinutes":45,"category":"improvement","severity":"low"},{"title":"Add proper error mapping in execute sign_user_actions","description":"sign_user_actions has TODO comment to add .map_err for signature operation. Add proper error context.","pathHint":"crates/context/src/handlers/execute.rs","estimatedMinutes":15,"category":"bug-risk","severity":"low"},{"title":"Split long init function per TODO","description":"merod init.rs has TODO to split long function to reduce complexity. Function exceeds complexity limits.","pathHint":"crates/merod/src/cli/init.rs","estimatedMinutes":45,"category":"improvement","severity":"low"},{"title":"Refactor long method parsing function per TODO","description":"method.rs has multiple TODOs to split long functions. Both method parsing functions are marked as needing refactoring.","pathHint":"crates/sdk/macros/src/logic/method.rs","estimatedMinutes":45,"category":"improvement","severity":"low"},{"title":"Fix TODO unwrap in logic/ty.rs","description":"Type parsing has unwrap() marked as TODO that needs correction to return an error instead.","pathHint":"crates/sdk/macros/src/logic/ty.rs","estimatedMinutes":20,"category":"bug-risk","severity":"medium"},{"title":"Fix TODO unwrap in logic.rs","description":"Logic parsing has unwrap() marked as TODO that needs correction to return an error instead.","pathHint":"crates/sdk/macros/src/logic.rs","estimatedMinutes":20,"category":"bug-risk","severity":"medium"},{"title":"Add response data to admin service TODO","description":"admin/service.rs has TODO to add data to response. Response is incomplete and should include relevant data.","pathHint":"crates/server/src/admin/service.rs","estimatedMinutes":20,"category":"improvement","severity":"low"},{"title":"Implement number fetching for proposals","description":"proposals.rs has TODO for missing function to fetch number of all proposals. Implement the missing functionality.","pathHint":"crates/server/src/admin/handlers/proposals.rs","estimatedMinutes":30,"category":"improvement","severity":"low"},{"title":"Add salt generation logic to proper location","description":"open_invitation.rs has TODO to figure out best place to generate salt. Move salt generation to appropriate location.","pathHint":"crates/server/src/admin/handlers/context/invite_to_context_open_invitation.rs","estimatedMinutes":25,"category":"improvement","severity":"low"},{"title":"Add block height query for invitation expiration","description":"client.rs has TODO to query current block height from NEAR client for calculating proper expiration. Implement block height query.","pathHint":"crates/context/primitives/src/client.rs","estimatedMinutes":30,"category":"improvement","severity":"low"},{"title":"Implement invitation conversion traits","description":"context.rs has TODO to add TryFrom implementations between InvitationPayload and ContextInvitationPayload.","pathHint":"crates/primitives/src/context.rs","estimatedMinutes":25,"category":"improvement","severity":"low"},{"title":"Document unclear fetch function restriction","description":"utility.rs has TODO to clarify why fetch function cannot be directly called by applications. Add documentation.","pathHint":"crates/runtime/src/logic/host_functions/utility.rs","estimatedMinutes":15,"category":"docs","severity":"low"},{"title":"Split long server initialization function","description":"server/lib.rs has TODO to split long function into multiple parts. Function is too complex.","pathHint":"crates/server/src/lib.rs","estimatedMinutes":45,"category":"improvement","severity":"low"},{"title":"Remove #[allow(dead_code)] and implement or remove code","description":"Multiple files have #[allow(dead_code)] for utility functions. Review and either use, document as planned feature, or remove.","pathHint":"crates/node/src/sync/helpers.rs","estimatedMinutes":25,"category":"code-quality","severity":"low"}]}
